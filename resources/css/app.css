/* @import 'bootstrap/dist/css/bootstrap.css'; */
@import 'bootstrap-icons/font/bootstrap-icons.css';
@import "tailwindcss";

@import './tokens.css';
@import './theme.css';
@import './dark-mode-editors.css';
@import './tom-select-debug.css';
@import './tom-select-ultimate-fix.css';

@import '../../vendor/livewire/flux/dist/flux.css';

@source '../views';
@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../vendor/livewire/flux-pro/stubs/**/*.blade.php';
@source '../../vendor/livewire/flux/stubs/**/*.blade.php';

@plugin "@tailwindcss/forms";
@plugin "flowbite/plugin";
@source "../node_modules/flowbite";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
    --font-sans: 'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

    --color-zinc-50: #fafafa;
    --color-zinc-100: #f5f5f5;
    --color-zinc-200: #e5e5e5;
    --color-zinc-300: #d4d4d4;
    --color-zinc-400: #a3a3a3;
    --color-zinc-500: #737373;
    --color-zinc-600: #525252;
    --color-zinc-700: #404040;
    --color-zinc-800: #262626;
    --color-zinc-900: #171717;
    --color-zinc-950: #0a0a0a;

    --color-accent: var(--color-neutral-800);
    --color-accent-content: var(--color-neutral-800);
    --color-accent-foreground: var(--color-white);
}

@layer theme {
    .dark {
        --color-accent: var(--color-white);
        --color-accent-content: var(--color-white);
        --color-accent-foreground: var(--color-neutral-800);
    }
}

@layer base {

    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

/* Tom Select styling untuk mencegah tumpang tindih dalam modal */
/* Tom Select dropdown ensure above modal and scrollable */
.ts-dropdown {
  z-index: 9999 !important; /* above modal (z-50 => 9999 is safe) */
  border-radius: 0.375rem;
  border: 1px solid rgb(209 213 219);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  background-color: #ffffff;
  max-height: 18rem; /* limit height */
  overflow-y: auto;
}

/* Dark mode untuk Tom Select */
.dark .ts-dropdown {
    background-color: rgb(55 65 81);
    border-color: rgb(75 85 99);
    color: rgb(249 250 251);
}

.dark .ts-dropdown .option {
    color: rgb(249 250 251);
}

.dark .ts-dropdown .option.active,
.dark .ts-dropdown .option:hover {
    background-color: rgb(79 70 229);
    color: white;
}

/* Tom Select control styling dalam modal */
/* Control styling align with input */
.ts-control {
  border-radius: 0.375rem;
  border: 1px solid rgb(209 213 219);
  padding: 0.5rem 0.75rem;
  background-color: #ffffff;
  min-height: 2.5rem;
}

/* Allow selects inside modals to overflow (Alpine teleport container) */
.modal-select-overflow { overflow: visible !important; }

.dark .ts-control {
    background-color: rgb(55 65 81);
    border-color: rgb(75 85 99);
    color: rgb(249 250 251);
}

[data-flux-field]:not(ui-radio, ui-checkbox) {
    @apply grid gap-2;
}

[data-flux-label] {
    @apply  !mb-0 !leading-tight;
}

input:focus[data-flux-control],
textarea:focus[data-flux-control],
select:focus[data-flux-control] {
    @apply outline-hidden ring-2 ring-accent ring-offset-2 ring-offset-accent-foreground;
}

/* \[:where(&)\]:size-4 {
    @apply size-4;
} */


:root {
  --font-body: 'Inter', sans-serif;
  --font-heading: 'Roboto', sans-serif;
}

/* Sidebar styles */
.sidebar {
  width: 280px;
  transition: all 0.3s ease;
}

.sidebar-collapsed {
  width: 80px;
}

.sidebar .arrow {
  transition: transform 0.2s ease;
}

.sidebar .rotated {
  transform: rotate(180deg);
}

/* Mobile sidebar animations */
.mobile-sidebar-enter {
  transform: translateX(-100%);
}

.mobile-sidebar-enter-active {
  transform: translateX(0);
  transition: transform 300ms ease-in-out;
}

.mobile-sidebar-leave {
  transform: translateX(0);
}

.mobile-sidebar-leave-active {
  transform: translateX(-100%);
  transition: transform 300ms ease-in-out;
}

@media (max-width: 576px) {
  .card-header .input-group { width: 100%; }
}

body {
     font-family: var(--font-body); 
     font-size: 16px; 
     line-height: 1.5; 
    }
    
h1, h2, h3 { 
    font-family: var(--font-heading); 
    margin-bottom: 
    1rem; }

.sidebar {
    min-width: 250px;
    max-width: 250px;
    background-color: #f8f9fa;
}
.sidebar .nav-link {
    color: #1f2937 !important; /* text-gray-800 for better contrast */
}

.sidebar .nav-link:hover {
    color: #111827 !important; /* text-gray-900 for maximum contrast on hover */
}

.footer-custom {
    background-color: #077A7D;
    color: #f1f1f1;
}

/* Scrollable cards */
.card-scroll {
    overflow-x: auto;
}
.card-scroll .d-flex .card {
    min-width: 16rem;
}

.chart-card {
    height: 400px;         /* tinggi sama untuk kedua kartu */
    display: flex;
    flex-direction: column;
}

.chart-card .card-body {
    flex: 1;               /* isi body memenuhi kartu */
}

.chart-wrapper {
    position: relative;
    height: 100%;          /* full tinggi body */
    width: 100%;
}
.offcanvas .nav-link {
    color: #000 !important;
}

.offcanvas .nav-link.active {
    color: #000 !important;
    background-color: #e2f5f0; /* atau warna highlight Anda */
}

.object-cover {
    object-fit: cover;
}

.badge-aspek {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
}

/* Semua teks pagination jadi hitam */
.page-link {
    color: #000 !important;
}

/* Hover tetap hitam agar konsisten */
.page-link:hover {
    color: #000 !important;
}

/* Warna aktif halaman */
.page-item.active .page-link {
    background-color: #077A7D !important;
    border-color: #077A7D !important;
    color: #fff !important;
}

.page-link {
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

.btn-icon {
  width: 36px;
  height: 36px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Smooth transition untuk ikon */
.sidebar .arrow {
  transition: transform .3s ease;
}

/* Saat collapse terbuka, panah berputar 180° */
.sidebar .collapse.show + ul .nav-link[aria-expanded="true"] .arrow,
.sidebar .nav-link[aria-expanded="true"] .arrow {
  transform: rotate(180deg);
}

/* Transisi halus untuk panah */
.offcanvas .arrow {
  transition: transform 0.3s ease;
}

/* Saat collapse terbuka (class .show) atau aria-expanded="true", panah berputar 180° */
.offcanvas .nav-link[aria-expanded="true"] .arrow {
  transform: rotate(180deg);
}

/* animate the chevron on toggle */
.arrow {
  transition: transform .2s ease;
}
.arrow.rotated {
  transform: rotate(180deg);
}

.card-animate {
  transition: all 0.3s ease;
  transform-origin: center;
}

.card-animate:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  border-color: #198754 !important; /* hijau Bootstrap */
}

.badge-hover-glow {
  transition: box-shadow 0.3s ease;
}

.card-animate:hover .badge-hover-glow {
  box-shadow: 0 0 0.4rem rgba(255, 255, 255, 0.4);
}

.note-editable ol {
    list-style: decimal !important; /* For ordered lists */
    list-style-position: inside !important; /* Optional: Adjust positioning */
}

.note-editable ul {
    list-style: disc !important; /* For unordered lists */
    list-style-position: inside !important; /* Optional: Adjust positioning */
}

.editor-output ol {
    list-style: decimal !important;
    list-style-position: inside !important;
    margin-left: 1rem;
    padding-left: 1rem;
}

.editor-output ul {
    list-style: disc !important;
    list-style-position: inside !important;
    margin-left: 1rem;
    padding-left: 1rem;
}

/* Trix Content Output - untuk display di halaman publik */
.trix-content ol,
div[class*="trix"] ol,
p ol {
    list-style: decimal !important;
    list-style-position: inside !important;
    margin-left: 1rem !important;
    padding-left: 0.5rem !important;
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
}

.trix-content ul,
div[class*="trix"] ul,
p ul {
    list-style: disc !important;
    list-style-position: inside !important;
    margin-left: 1rem !important;
    padding-left: 0.5rem !important;
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
}

.trix-content li,
div[class*="trix"] li,
p li {
    margin-bottom: 0.25rem !important;
    line-height: 1.6 !important;
}

/* General content styling untuk output HTML dari Trix */
.content-html ol {
    list-style: decimal !important;
    list-style-position: inside !important;
    margin-left: 1rem !important;
    padding-left: 0.5rem !important;
}

.content-html ul {
    list-style: disc !important;
    list-style-position: inside !important;
    margin-left: 1rem !important;
    padding-left: 0.5rem !important;
}

.content-html li {
    margin-bottom: 0.25rem !important;
    line-height: 1.6 !important;
}

/* Sidebar Styles */
.sidebar {
  width: 280px;
  min-width: 280px;
  transition: all 0.3s ease-in-out;
}

.sidebar-collapsed {
  width: 100px !important;
  min-width: 100px !important;
}

/* Arrow rotation for dropdown */
.arrow {
  transition: transform 0.3s ease;
}

.arrow.rotated {
  transform: rotate(180deg);
}

/* Smooth transitions for Alpine.js */
[x-cloak] {
  display: none !important;
}

/* Tooltip untuk collapsed state */
.sidebar-collapsed .nav-link {
  justify-content: center;
}

.sidebar-collapsed .nav-link i {
  margin-right: 0 !important;
}

/* Responsive adjustments */
@media (max-width: 767.98px) {
  .sidebar {
    width: 100% !important;
    min-width: 100% !important;
  }
  
  .sidebar-collapsed {
    width: 100% !important;
    min-width: 100% !important;
  }
}

/*dark mode styles */

/* Paksa kelas terang ikut gelap saat data-bs-theme="dark" */
[data-bs-theme="dark"] .bg-white { 
  background-color: var(--bs-body-bg) !important; 
  color: var(--bs-body-color) !important;
}

/* Header tabel yang pakai table-light -> pakai palet gelap */
[data-bs-theme="dark"] .table-light {
  --bs-table-bg: var(--bs-tertiary-bg);
  --bs-table-color: var(--bs-body-color);
  --bs-table-border-color: var(--bs-border-color);
}

/* Garis tabel & striping */
[data-bs-theme="dark"] .table,
[data-bs-theme="dark"] .table * {
  border-color: var(--bs-border-color) !important;
}
[data-bs-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) {
  --bs-table-accent-bg: rgba(255,255,255,.05);
}

/* Form controls yang di-wrap bg putih manual */
[data-bs-theme="dark"] .input-group-text,
[data-bs-theme="dark"] .form-control,
[data-bs-theme="dark"] .form-select {
  background-color: var(--bs-body-bg) !important;
  color: var(--bs-body-color) !important;
  border-color: var(--bs-border-color) !important;
}

/* Sidebar kustom agar ikut token Bootstrap */
.sidebar {
  background-color: var(--bs-body-bg) !important;
  color: var(--bs-body-color) !important;
  border-color: var(--bs-border-color) !important;
}

/* 1) Variabel tema */
:root {
  --hsu-neon: #b0eace;          /* hijau neon */
}
[data-bs-theme="light"] {
  --hsu-neon-text: #0B0B0B;     /* teks gelap di light */
  --hsu-neon-text-active:  #0B0B0B; 
}
[data-bs-theme="dark"] {
  --hsu-neon-text:  #ffffff;   
  --hsu-neon-text-active:  #0B0B0B;    /* teks putih di dark */
}

/* 2) Nav-link aktif pakai variabel di atas */
.sidebar .nav-link {
  color: var(--hsu-neon-text) !important; 
}
.sidebar .nav-link.active {
  background-color: var(--hsu-neon) !important;
  color: var(--hsu-neon-text-active) !important;
  border-radius: .5rem;
  border: 1px solid rgba(0,0,0,.08);
}

/* Ikon pada link aktif ikut warna teks */
.sidebar .nav-link.active i,
.sidebar .nav-link.active .bi {
  color: var(--hsu-neon-text-active) !important;
}

/* 3) (Opsional) state hover utk active */
.sidebar .nav-link.active:hover {
  filter: brightness(.96);
}

/* From Uiverse.io by shadowfax29 */ 
/* The switch - the box around the slider */
.switch {
  font-size: 12px;
  position: relative;
  display: inline-block;
  width: 3.5em;
  height: 2em;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #cfcfcf;
  transition: .4s;
  border-radius: 30px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 1.4em;
  width: 1.4em;
  border-radius: 20px;
  left: 0.3em;
  bottom: 0.3em;
  background-color: yellow;
  transition: .4s;
}

.switch input:checked + .slider:before {
  background-color: rgb(83, 86, 247);
  border-radius: 50px;
  box-shadow: inset 9px 0px 1px 0px yellow;
}

.switch input:checked + .slider {
  background-color:rgb(83, 86, 247);
}

.switch input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

.switch input:checked + .slider:before {
  transform: translateX(1.5em);
}

.offcanvas .nav-link {
  color: var(--hsu-neon-text) !important; 
}

/* ===== ADDITIONAL UTILITY CLASSES ===== */
.table-clean thead th { 
  position: sticky; 
  top: 0; 
  z-index: 1; 
}

.w-40 { width: 40px; }
.w-80 { width: 80px; }
.w-120 { width: 120px; }

.truncate { 
  max-width: 260px; 
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis; 
}

@media (max-width: 991.98px) { 
  .truncate { 
    max-width: 180px; 
  } 
}

/* ===== CHAT FUNCTIONALITY STYLES ===== */
.chat-shell {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

.chat-message {
  animation: fadeInUp 0.3s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Chat scrollbar styling */
.chat-scroll::-webkit-scrollbar {
  width: 6px;
}

.chat-scroll::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}

.chat-scroll::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 3px;
}

.chat-scroll::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.5);
}

/* Chat loading animation */
.chat-typing {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.chat-typing::after {
  content: '';
  display: inline-block;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background-color: currentColor;
  animation: chat-dot-blink 1.4s infinite both;
}

@keyframes chat-dot-blink {
  0%, 80%, 100% {
    opacity: 0.3;
  }
  40% {
    opacity: 1;
  }
}

/* Modal enhancements */
.modal-backdrop.show {
  background-color: rgba(0, 0, 0, 0.7) !important;
}

.dark .modal-backdrop.show {
  background-color: rgba(0, 0, 0, 0.8) !important;
}

/* Chart container */
.chart-container {
  position: relative;
  height: 300px;
  max-height: 400px;
}

.chart-container canvas {
  max-height: 100% !important;
}

/* ===== CHAT COMPONENT SPECIFIC STYLES ===== */
.chat-shell{
  display:flex;
  flex-direction:column;
  gap:10px;
  height:100%;
  @apply bg-white dark:!bg-gray-900 text-gray-900 dark:text-white;
}
.chat-welcome{
  padding:18px 6px;
  @apply bg-white dark:!bg-gray-900;
}
.chat-body{
  display:flex;
  flex-direction:column;
  gap:12px;
  min-height:260px;
  max-height:52vh;
  overflow:auto;
  @apply bg-white dark:!bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-3;
}
.chat-msg{
  display:flex;
  width:100%;
}
.chat-msg.user{
  justify-content:flex-end;
}
.chat-msg.ai{
  justify-content:flex-start;
}
.chat-bubble{
  display:inline-block;
  max-width:78%;
  padding:12px 14px;
  border-radius:16px;
  box-shadow:0 1px 2px rgba(0,0,0,.05);
}
.chat-bubble.user{
  @apply bg-blue-500 text-white dark:bg-blue-500 text-white;
  border-bottom-right-radius:6px;
}
.chat-bubble.ai{
  @apply bg-gray-100 dark:!bg-gray-800 border border-gray-200 dark:border-gray-600;
  @apply text-gray-800 dark:text-gray-100;
  border-bottom-left-radius:6px;
}
.role-tag{
  font-size:.72rem;
  font-weight:700;
  opacity:.7;
  margin-bottom:4px;
  @apply text-gray-600 dark:text-gray-300;
}
.content{
  white-space:pre-wrap;
  line-height:1.55;
  @apply text-gray-800 dark:text-gray-100;
}
.sources{
  margin-top:6px;
  @apply text-gray-500 dark:text-gray-400;
}
.sources a{
  @apply text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300;
}
.insights{
  @apply text-gray-700 dark:text-gray-300;
}
.chart-wrap{
  margin-top:10px;
  @apply bg-white dark:!bg-gray-800 rounded-lg p-2;
}
.chat-input{
  @apply w-full bg-white dark:!bg-gray-900;
}

/* Custom scrollbar untuk dark mode */
.chat-body::-webkit-scrollbar {
  width: 6px;
}
.chat-body::-webkit-scrollbar-track {
  @apply bg-gray-100 dark:!bg-gray-800 rounded-full;
}
.chat-body::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-gray-500 rounded-full;
}
.chat-body::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400 dark:bg-gray-400;
}

/* animasi titik tiga */
.role-tag.loading::after {
  content: '...';
  animation: dots 1.5s steps(3, end) infinite;
}

@keyframes dots {
  0%   { content: ''; }
  33%  { content: '.'; }
  66%  { content: '..'; }
  100% { content: '...'; }
}

/* Trix Editor Styling */
trix-editor {
  @apply border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500;
  min-height: 200px !important;
  padding: 0.75rem !important;
  background: white;
}

/* Dark mode support untuk Trix */
.dark trix-editor {
  @apply border-gray-600 bg-gray-800 text-white;
}

.dark trix-editor:focus {
  @apply ring-indigo-400 border-indigo-400;
}

/* Trix toolbar styling */
.trix-button-row {
  @apply border-b border-gray-300;
}

.dark .trix-button-row {
  @apply border-gray-600;
}

.trix-button {
  @apply text-gray-700 hover:text-gray-900 hover:bg-gray-100;
  border: none !important;
  background: none !important;
}

.dark .trix-button {
  @apply text-gray-300 hover:text-white hover:bg-gray-700;
}

.trix-button.trix-active {
  @apply bg-indigo-100 text-indigo-700;
}

.dark .trix-button.trix-active {
  @apply bg-indigo-900 text-indigo-300;
}

/* Trix content styling */
.trix-content {
  line-height: 1.6;
}

.trix-content h1 {
  @apply text-2xl font-bold mb-4;
}

.trix-content h2 {
  @apply text-xl font-semibold mb-3;
}

.trix-content p {
  @apply mb-3;
}

.trix-content ul, .trix-content ol {
  @apply mb-3 pl-6;
  list-style-position: inside !important;
}

.trix-content ul {
  @apply list-disc;
}

.trix-content ol {
  @apply list-decimal;
}

.trix-content li {
  @apply mb-1;
  display: list-item !important;
}

/* Pastikan list button di toolbar berfungsi */
.trix-button[data-trix-action="bulletList"],
.trix-button[data-trix-action="numberList"] {
  pointer-events: auto !important;
  opacity: 1 !important;
}

/* Style untuk list di dalam editor saat editing */
trix-editor ul, trix-editor ol {
  @apply mb-3 pl-6;
  list-style-position: inside !important;
}

trix-editor ul {
  @apply list-disc;
}

trix-editor ol {
  @apply list-decimal;
}

trix-editor li {
  @apply mb-1;
  display: list-item !important;
}

.trix-content blockquote {
  @apply border-l-4 border-gray-300 pl-4 italic;
}

.dark .trix-content blockquote {
  @apply border-gray-600;
}